<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok LIVE</title>

    <meta name="description" content="A chat reader for TikTok LIVE utilizing TikTok-Live-Connector and Socket.IO to forward the data to the client. This demo project uses the unofficial TikTok API to retrieve chat comments, gifts and other events from TikTok LIVE.">
    <meta name="keywords" content="TikTok,Live,Livestream,Chat,Reader,Scraper,Tracker,tiktok.com,broadcast,api,library,node,node.js,javascript">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=10.0">

    <link rel="stylesheet" href="style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="connection.js"></script>
    <script src="app.js"></script>
    <script src="index.js"></script>
    <script>
        function generateOverlay() {
            let username = $('#uniqueIdInput').val();
            let url = `/obs.html?username=${username}&showLikes=1&showChats=1&showGifts=1&showFollows=1&showJoins=1&bgColor=rgb(24,23,28)&fontColor=rgb(227,229,235)&fontSize=1.3em`;

            if (username) {
                window.open(url, '_blank');
            } else {
                alert("Enter username");
            }
        }
    </script>
</head>

<body>
    <div class="inputFields">
        <p>Ingresa el <b>@nombredeusuario</b>:</p>
        <input type="text" id="uniqueIdInput" value="@melserngl">
        <input type="button" id="connectButton" value="Conectar">
        <a href="#" onclick="generateOverlay()">Overlay URL</a>
    </div>
    <div class="themeButtons">
        <button onclick="showColorPicker('bgColor')">body color</button>
        <button onclick="showColorPicker('fontColor')">font color</button>
        <button onclick="changeTheme('theme-dark')">Tema Oscuro</button>
        <button onclick="applyTheme()">Aplicar</button>
    </div>

    <script>
        var bgColor = localStorage.getItem('bgColor') || '#ffff1f';
        var fontColor = localStorage.getItem('fontColor') || '#010000';

        applyTheme();

        function showColorPicker(type) {
            var colorPicker = document.createElement('input');
            colorPicker.type = 'color';
            colorPicker.addEventListener('change', function() {
                var color = this.value;
                if (type === 'bgColor') {
                    bgColor = color;
                } else if (type === 'fontColor') {
                    fontColor = color;
                }
            });

            colorPicker.click();
        }

        function changeTheme(theme) {
            if (theme === 'theme-dark') {
                bgColor = '#000000';
                fontColor = '#ffffff';
            }
            applyTheme(); // Aplicar los cambios de color al cambiar el tema
        }

        function applyTheme() {
            document.body.style.backgroundColor = bgColor;
            document.body.style.color = fontColor;
            localStorage.setItem('bgColor', bgColor);
            localStorage.setItem('fontColor', fontColor);
        }
    </script>

    <head>
        <script src=tmi.min.js></script>
        <script src=TTSmain.js></script>
    </head>

    <body>
        <input id="channel" type="text" placeholder="channel name goes here"></input> <input id="channel-button" value="GO" type="button"></input>
        <!--br/-->
        <input id="skip-button" type="button" value="SKIP"></input> <br/>
        <div id="chatbox"></div>
    </body>
    <table class="splitstatetable">
        <div id="stateText"></div>
        <div id="roomStats"></div>
    </table>

    <div class="splitchattable">
        <div class="chatcontainer">
            <h3 class="containerheader">Chats</h3>
        </div>
        <div class="giftcontainer">
            <h3 class="containerheader">Gifts</h3>
        </div>
    </div>
    <iframe src="http://localhost:8111/overlay/" frameborder="0" style="width: 100%; height: 100%;" allow="autoplay"></iframe></iframe>
    <div>
        <script>
            document.body.appendChild(voiceSelect);
        </script><audio id="audio" controls autoplay></audio> <br/></div>
    <audio id="audio" autoplay></audio>
    <audio id="soundPlayer" src="" type="audio/mp3"></audio>
</body>

<body>
    <webchatgpt-custom-element-bc18c451-d94d-48bc-8a67-f46a28eefcd8 id="webchatgpt-snackbar" style="z-index: 2147483647;"></webchatgpt-custom-element-bc18c451-d94d-48bc-8a67-f46a28eefcd8>
    <div id="monica-content-root" class="monica-widget" data-darkreader-mode="dynamic" data-darkreader-scheme="dark">
        <meta name="darkreader" content="796a1b9879ee427291add6fb0d02ecf2">
    </div>
    <div id="otherside-root" style="z-index: 2147483647; position: relative;">
        <div id="hyper-main-container">
            <div id="hyper-menu-shadow-root" style="all: initial;"></div>
            <div id="assistant-shadow-root" style="all: initial;"></div>
        </div>
    </div>
</body>

</html>